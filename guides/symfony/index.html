<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-gb">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Getting Started with Symfony - ContinuousPipe Docs</title>
    <meta name="generator" content="Hugo 0.18" />

    
    <meta name="description" content="Documentation for ContinuousPipe">
    
    <link rel="canonical" href="../../guides/symfony/">
    
    <meta name="author" content="Samuel RozÃ©">
    

    <meta property="og:url" content="/guides/symfony/">
    <meta property="og:title" content="ContinuousPipe Docs">
    <meta property="og:image" content="/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="ContinuousPipe Docs">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="../../images/favicon.png">
    <link rel="icon" type="image/x-icon" href="../../images/favicon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('/fonts/icon.eot');
        src: url('/fonts/icon.eot')
               format('embedded-opentype'),
             url('/fonts/icon.woff')
               format('woff'),
             url('/fonts/icon.ttf')
               format('truetype'),
             url('/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="../../stylesheets/application.css">
    <link rel="stylesheet" href="../../stylesheets/temporary.css">
    <link rel="stylesheet" href="../../stylesheets/palettes.css">
    <link rel="stylesheet" href="../../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open%20Sans:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Open Sans', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">
    
    <link rel="stylesheet" href="../../stylesheets/custom.css">
    
    <script src="../../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-blue palette-accent-teal">


<div class="backdrop">
    <div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
    <nav aria-label="Header">
    <div class="bar default">
        <div class="button button-menu" role="button" aria-label="Menu">
            <label class="toggle-button icon icon-menu" for="toggle-drawer">
                <span></span>
            </label>
        </div>
        <div class="stretch">
            <div class="title">
                <a href="https://continuouspipe.io/" class="cp-website-link"><i class="cp-icon-logo"></i></a>
                <a href="../../">ContinuousPipe
                    Documentation</a>
            </div>
        </div>

        
        <div class="button button-twitter" role="button" aria-label="Twitter">
            <a href="https://twitter.com/continuouspipe" title="@continuouspipe on Twitter" target="_blank"
               class="toggle-button icon icon-twitter"></a>
        </div>
        

        
        <div class="button button-github" role="button" aria-label="GitHub">
            <a href="https://github.com/continuouspipe" title="@continuouspipe on GitHub" target="_blank"
               class="toggle-button icon icon-github"></a>
        </div>
        

        <div class="button button-search" role="button" aria-label="Search">
            <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
        </div>
    </div>
    <div class="bar search">
        <div class="button button-close" role="button" aria-label="Close">
            <label class="toggle-button icon icon-back" for="toggle-search"></label>
        </div>
        <div class="stretch">
            <div class="field">
                <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off"
                       autocomplete="off" spellcheck id="algolia-query">
            </div>
        </div>
        <div class="button button-reset" role="button" aria-label="Search">
            <button class="toggle-button icon icon-close" id="reset-search"></button>
        </div>
    </div>
</nav>

</header>

<main class="main">
    <div class="drawer">
        <nav aria-label="Navigation">
  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          



    
    
    <li>
        



<a  title="Basics" href="../../basics/">
	
	Basics
</a>


        
        <ul >
           
            
            



<a  title="ContinuousPipe" href="../../basics/continuous-pipe/">
	
	ContinuousPipe
</a>

           
            
            



<a  title="Concepts: ContinuousPipe Concepts" href="../../basics/concepts-continuous-pipe-concepts/">
	
	Concepts: ContinuousPipe Concepts
</a>

           
            
            



<a  title="Concepts: Configuration Concepts" href="../../basics/concepts-configuration-concepts/">
	
	Concepts: Configuration Concepts
</a>

           
            
            



<a  title="Concepts: Build Concepts" href="../../basics/concepts-build-concepts/">
	
	Concepts: Build Concepts
</a>

           
            
            



<a  title="Concepts: Deployment Concepts" href="../../basics/concepts-deployment-concepts/">
	
	Concepts: Deployment Concepts
</a>

           
            
            



<a  title="Workflow Principles" href="../../basics/workflow-principles/">
	
	Workflow Principles
</a>

           
            
            



<a  title="Installation: GitHub" href="../../basics/installation-github/">
	
	Installation: GitHub
</a>

           
            
            



<a  title="Installation: Bitbucket" href="../../basics/installation-bitbucket/">
	
	Installation: Bitbucket
</a>

          
        </ul>
      
    </li>



    
    
    <li>
        



<a  title="Quick Start" href="../../quick-start/">
	
	Quick Start
</a>


        
        <ul >
           
            
            



<a  title="Creating a Project" href="../../quick-start/creating-a-project/">
	
	Creating a Project
</a>

           
            
            



<a  title="Creating a Flow" href="../../quick-start/creating-a-flow/">
	
	Creating a Flow
</a>

           
            
            



<a  title="Configuring Users" href="../../quick-start/configuring-users/">
	
	Configuring Users
</a>

           
            
            



<a  title="Configuring a Cluster" href="../../quick-start/configuring-a-cluster/">
	
	Configuring a Cluster
</a>

           
            
            



<a  title="Configuring a Registry" href="../../quick-start/configuring-a-registry/">
	
	Configuring a Registry
</a>

           
            
            



<a  title="Configuring Your Repository" href="../../quick-start/configuring-your-repository/">
	
	Configuring Your Repository
</a>

           
            
            



<a  title="Configuring a Flow" href="../../quick-start/configuring-a-flow/">
	
	Configuring a Flow
</a>

           
            
            



<a  title="Creating a Tide" href="../../quick-start/creating-a-tide/">
	
	Creating a Tide
</a>

           
            
            



<a  title="Remote Development: Installing the Client" href="../../quick-start/remote-development-installing-the-client/">
	
	Remote Development: Installing the Client
</a>

           
            
            



<a  title="Remote Development: Configuring Your Repository" href="../../quick-start/remote-development-configuring-your-repository/">
	
	Remote Development: Configuring Your Repository
</a>

           
            
            



<a  title="Remote Development: Creating a Remote Environment" href="../../quick-start/remote-development-creating-a-remote-environment/">
	
	Remote Development: Creating a Remote Environment
</a>

           
            
            



<a  title="Remote Development: Using a Remote Environment" href="../../quick-start/remote-development-using-a-remote-environment/">
	
	Remote Development: Using a Remote Environment
</a>

          
        </ul>
      
    </li>



    
    
    <li>
        



<a  title="Configuration" href="../../configuration/">
	
	Configuration
</a>


        
        <ul >
           
            
            



<a  title="Configuration Files" href="../../configuration/configuration-files/">
	
	Configuration Files
</a>

           
            
            



<a  title="Tasks" href="../../configuration/tasks/">
	
	Tasks
</a>

           
            
            



<a  title="Tasks: Building Docker Images" href="../../configuration/tasks-build/">
	
	Tasks: Building Docker Images
</a>

           
            
            



<a  title="Tasks: Deploying Services" href="../../configuration/tasks-deploy/">
	
	Tasks: Deploying Services
</a>

           
            
            



<a  title="Tasks: Running Commands" href="../../configuration/tasks-run/">
	
	Tasks: Running Commands
</a>

           
            
            



<a  title="Tasks: Waiting Statuses" href="../../configuration/tasks-wait/">
	
	Tasks: Waiting Statuses
</a>

           
            
            



<a  title="Tasks: Manual Approval" href="../../configuration/tasks-manual-approval/">
	
	Tasks: Manual Approval
</a>

           
            
            



<a  title="Tasks: Creating Webhooks" href="../../configuration/tasks-webhook/">
	
	Tasks: Creating Webhooks
</a>

           
            
            



<a  title="Notifications" href="../../configuration/notifications/">
	
	Notifications
</a>

           
            
            



<a  title="Pipelines" href="../../configuration/pipelines/">
	
	Pipelines
</a>

           
            
            



<a  title="Cloudflare Integration" href="../../configuration/cloudflare-integration/">
	
	Cloudflare Integration
</a>

           
            
            



<a  title="Endpoints" href="../../configuration/endpoints/">
	
	Endpoints
</a>

           
            
            



<a  title="Artifacts" href="../../configuration/artifacts/">
	
	Artifacts
</a>

          
        </ul>
      
    </li>



    
    
    <li>
        



<a  title="Remote Development" href="../../remote-development/">
	
	Remote Development
</a>


        
        <ul >
           
            
            



<a  title="Getting Started" href="../../remote-development/getting-started/">
	
	Getting Started
</a>

           
            
            



<a  title="Working with a Different Environment" href="../../remote-development/working-with-different-environments/">
	
	Working with a Different Environment
</a>

           
            
            



<a  title="Working with a Direct Connection to the Cluster" href="../../remote-development/working-with-direct-cluster-connection/">
	
	Working with a Direct Connection to the Cluster
</a>

           
            
            



<a  title="Advanced Setup" href="../../remote-development/advanced-setup/">
	
	Advanced Setup
</a>

           
            
            



<a  title="Command: Init" href="../../remote-development/command-init/">
	
	Command: Init
</a>

           
            
            



<a  title="Command: Setup" href="../../remote-development/command-setup/">
	
	Command: Setup
</a>

           
            
            



<a  title="Command: Build" href="../../remote-development/command-build/">
	
	Command: Build
</a>

           
            
            



<a  title="Command: Logs" href="../../remote-development/command-logs/">
	
	Command: Logs
</a>

           
            
            



<a  title="Command: Bash" href="../../remote-development/command-bash/">
	
	Command: Bash
</a>

           
            
            



<a  title="Command: Exec" href="../../remote-development/command-exec/">
	
	Command: Exec
</a>

           
            
            



<a  title="Command: Watch" href="../../remote-development/command-watch/">
	
	Command: Watch
</a>

           
            
            



<a  title="Command: Fetch" href="../../remote-development/command-fetch/">
	
	Command: Fetch
</a>

           
            
            



<a  title="Command: Push" href="../../remote-development/command-push/">
	
	Command: Push
</a>

           
            
            



<a  title="Command: Sync" href="../../remote-development/command-sync/">
	
	Command: Sync
</a>

           
            
            



<a  title="Command: Delete" href="../../remote-development/command-delete/">
	
	Command: Delete
</a>

           
            
            



<a  title="Command: Forward" href="../../remote-development/command-forward/">
	
	Command: Forward
</a>

           
            
            



<a  title="Command: Pods" href="../../remote-development/command-pods/">
	
	Command: Pods
</a>

           
            
            



<a  title="Command: Check Connection" href="../../remote-development/command-check-connection/">
	
	Command: Check Connection
</a>

           
            
            



<a  title="Command: Destroy" href="../../remote-development/command-destroy/">
	
	Command: Destroy
</a>

           
            
            



<a  title="Release Notes v0.1.0" href="../../remote-development/release-notes-0-1-0/">
	
	Release Notes v0.1.0
</a>

           
            
            



<a  title="Release Notes v0.1.1" href="../../remote-development/release-notes-0-1-1/">
	
	Release Notes v0.1.1
</a>

           
            
            



<a  title="Release Notes v0.1.2" href="../../remote-development/release-notes-0-1-2/">
	
	Release Notes v0.1.2
</a>

           
            
            



<a  title="Release Notes v0.1.3" href="../../remote-development/release-notes-0-1-3/">
	
	Release Notes v0.1.3
</a>

           
            
            



<a  title="Release Notes v0.1.4" href="../../remote-development/release-notes-0-1-4/">
	
	Release Notes v0.1.4
</a>

           
            
            



<a  title="Release Notes v0.1.5" href="../../remote-development/release-notes-0-1-5/">
	
	Release Notes v0.1.5
</a>

          
        </ul>
      
    </li>



    
    
    <li>
        



<a  title="FAQ" href="../../faq/">
	
	FAQ
</a>


        
        <ul >
           
            
            



<a  title="Billing Profile" href="../../faq/how-do-I-create-a-billing-profile/">
	
	Billing Profile
</a>

           
            
            



<a  title="ContinuousPipe Images" href="../../faq/what-are-the-continuous-pipe-images/">
	
	ContinuousPipe Images
</a>

           
            
            



<a  title="ContinuousPipe Demo Sites" href="../../faq/what-are-the-continuous-pipe-demo-sites/">
	
	ContinuousPipe Demo Sites
</a>

           
            
            



<a  title="ContinuousPipe API Keys" href="../../faq/where-can-I-get-a-continuous-pipe-api-key/">
	
	ContinuousPipe API Keys
</a>

           
            
            



<a  title="Deployment Logs and Events" href="../../faq/where-can-I-view-container-logs-and-events/">
	
	Deployment Logs and Events
</a>

           
            
            



<a  title="Setting Environment Variables" href="../../faq/how-do-I-set-environment-variables/">
	
	Setting Environment Variables
</a>

           
            
            



<a  title="Controlling Deployments" href="../../faq/how-do-I-control-deployments-using-pr-labels/">
	
	Controlling Deployments
</a>

           
            
            



<a  title="Using Defaults" href="../../faq/how-do-I-use-defaults-to-reduce-the-duplication-of-configuration/">
	
	Using Defaults
</a>

           
            
            



<a  title="Setup GitHub Token" href="../../faq/how-do-I-use-composer-with-github-access-token/">
	
	Setup GitHub Token
</a>

           
            
            



<a  title="Using Pipelines" href="../../faq/how-do-I-use-pipelines-to-simplify-the-configuration/">
	
	Using Pipelines
</a>

           
            
            



<a  title="Basic Authentication" href="../../faq/how-do-I-add-basic-http-authentication-to-an-application/">
	
	Basic Authentication
</a>

           
            
            



<a  title="Overriding Tasks" href="../../faq/how-do-I-override-tasks-in-pipelines/">
	
	Overriding Tasks
</a>

           
            
            



<a  title="Manual Approval" href="../../faq/how-do-I-set-up-manual-approval-of-deployments/">
	
	Manual Approval
</a>

           
            
            



<a  title="Readiness Checks on Services" href="../../faq/how-do-I-define-a-readiness-check-when-deploying-services/">
	
	Readiness Checks on Services
</a>

           
            
            



<a  title="Get Endpoint Address for a Service" href="../../faq/how-do-I-get-the-deployed-endpoint-address-for-a-service/">
	
	Get Endpoint Address for a Service
</a>

           
            
            



<a  title="Slack Notifications" href="../../faq/how-do-I-configure-slack-notifications/">
	
	Slack Notifications
</a>

           
            
            



<a  title="Watch Commands and Inotify" href="../../faq/how-do-I-configure-inotify-for-development-tool-watch-commands/">
	
	Watch Commands and Inotify
</a>

          
        </ul>
      
    </li>



    
    
    <li>
        



<a class="current" title="Guides" href="../../guides/">
	
	Guides
</a>


        
        <ul class="current">
           
            
            



<a  title="Getting Started with Laravel" href="../../guides/laravel/">
	
	Getting Started with Laravel
</a>

           
            
            



<a class="current" title="Getting Started with Symfony" href="../../guides/symfony/">
	
	Getting Started with Symfony
</a>

           
            
            



<a  title="Getting Started with Drupal" href="../../guides/drupal/">
	
	Getting Started with Drupal
</a>

           
            
            



<a  title="Xdebug Remote Environment" href="../../guides/remote-environment-xdebug/">
	
	Xdebug Remote Environment
</a>

          
        </ul>
      
    </li>



        </ul>
        

      </div>
    </div>
  </div>
</nav>

    </div>

    <article class="article">
        <div class="wrapper">
            
<h1>Getting Started with Symfony </h1>



<h2 id="introduction">Introduction</h2>

<p>This is a guide to getting a Symfony application running on ContinuousPipe with a remote development environment. The code samples used in the guide can be seen at <a href="https://github.com/continuouspipe/demo-symfony">https://github.com/continuouspipe/demo-symfony</a>.</p>

<div class="admonition note">
<p class="admonition-title">Recorded video</p>
<p>We&rsquo;ve recorded a <a href="https://www.youtube.com/watch?v=d45YNe7umWI">getting started with ContinuousPipe</a> video that uses a Symfony application as a demonstration, you may also want to have a look.</p>
</div>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before getting started you will need the following:</p>

<ul>
<li>A <a href="https://github.com/">GitHub</a> or <a href="https://bitbucket.org/">Bitbucket</a> account to host your Symfony project</li>
<li>A <a href="https://continuouspipe.io/">ContinuousPipe</a> account</li>
<li>A Kubernetes cluster e.g. <a href="https://aws.amazon.com/">AWS</a>, <a href="https://cloud.google.com/container-engine/">GCE</a> or <a href="https://azure.microsoft.com/en-au/">Azure</a></li>
<li>A Docker Registry account e.g. <a href="https://docker.io">docker.io</a> or <a href="https://quay.io">quay.io</a></li>
</ul>

<h2 id="setting-up-symfony">Setting Up Symfony</h2>

<h3 id="installing-symfony">Installing Symfony</h3>

<p>Use the <a href="http://symfony.com/download">Symfony installer tool</a> to create a new Symfony application locally:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>symfony new demo-symfony <span style="color: #75715e">#replace demo-symfony with your project name</span>
</pre></div>

<p>Check everything is working so far using the local webserver:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">cd</span> demo-symfony
bin/console server:run
</pre></div>

<h3 id="connecting-to-the-github-repository">Connecting to the GitHub Repository</h3>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This series of steps are needed because the Symfony installer will not install Symfony into an existing directory, so cloning the repository first does not work.</p>
</div>

<p>Create a local git repository:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>git init
</pre></div>

<p>Commit the initial installation:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>git add . <span style="color: #f92672">&amp;&amp;</span> git commit -m <span style="color: #e6db74">&quot;Initial installation of Symfony&quot;</span>
</pre></div>

<p>Add a GitHub repository as a remote:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>git remote add origin git@github.com:continuouspipe/demo-symfony.git
<span style="color: #75715e">#replacing the organisation and repository with your repository</span>
</pre></div>

<h2 id="integrating-symfony-with-continuouspipe">Integrating Symfony with ContinuousPipe</h2>

<h3 id="adding-docker-configuration-files">Adding Docker Configuration Files</h3>

<p>Add a <code>Dockerfile</code> to the project root with the following content:</p>

<blockquote>
<p><strong>Dockerfile</strong></p>

<pre><code>FROM quay.io/continuouspipe/symfony-php7.1-nginx:v1.0
ARG GITHUB_TOKEN=
ARG SYMFONY_ENV=prod
ENV SYMFONY_ENV $SYMFONY_ENV
COPY . /app
RUN container build
</code></pre>
</blockquote>

<p>The Dockerfile is used to specify how the Docker image is built. It is based on a prebuilt image created specifically for Symfony running on nginx. This is one of several <a href="../../faq/what-are-the-continuous-pipe-images/">ContinuousPipe images</a> that can be found at <a href="https://github.com/continuouspipe/dockerfiles">https://github.com/continuouspipe/dockerfiles</a>. The <a href="https://github.com/continuouspipe/dockerfiles/tree/master/symfony#environment-variables">README</a> for the prebuilt image lists the arguments that can be passed when it is initialised, including the <code>SYMFONY_ENV</code> environment variable. The repository project code is copied onto the image and a script is run which will do things like install the vendors with composer. Read more about <a href="https://docs.docker.com/engine/reference/builder/">Dockerfiles</a>.</p>

<p>Add the following docker compose configuration in a <code>docker-compose.yml</code> file in the project root.</p>

<blockquote>
<p><strong>docker-compose.yml</strong></p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #ae81ff">version</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&quot;2&quot;</span>
<span style="color: #ae81ff">services</span><span style="color: #f8f8f2">:</span>
  <span style="color: #ae81ff">web</span><span style="color: #f8f8f2">:</span>
      <span style="color: #ae81ff">build</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">.</span>
      <span style="color: #ae81ff">expose</span><span style="color: #f8f8f2">:</span>
          <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">80</span>
          <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">443</span>
      <span style="color: #ae81ff">ports</span><span style="color: #f8f8f2">:</span>
          <span style="color: #f8f8f2">-</span> <span style="color: #e6db74">&quot;8080:80&quot;</span>
          <span style="color: #f8f8f2">-</span> <span style="color: #e6db74">&quot;443:443&quot;</span>
      <span style="color: #ae81ff">volumes</span><span style="color: #f8f8f2">:</span>
          <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">.:/app</span>
</pre></div>
</blockquote>

<p>ContinuousPipe uses the <code>docker-compose.yml</code> configuration to know how to build and configure the services that it deploys. Here only a single web service is used as adding other services such as a database is left out at this stage. The configuration for the web service specifies the following:</p>

<ul>
<li>That the service is created from an image built from a Dockerfile in the same directory (build: .)</li>
<li>Which ports to expose</li>
<li>What the project directory is mounted as a volume at /app</li>
</ul>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mounting the volume is not needed for ContinuousPipe but does allow us to run the service locally using <a href="https://docs.docker.com/compose/">docker-compose</a> and be able to make change to the project source code and see the changes.</p>
</div>

<h3 id="adding-continuouspipe-configuration-file">Adding ContinuousPipe Configuration File</h3>

<p>Add a <code>continuous-pipe.yml</code> file to the project root with a basic configuration of:</p>

<blockquote>
<p><strong>continuous-pipe.yml</strong></p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #ae81ff">tasks</span><span style="color: #f8f8f2">:</span>
  <span style="color: #ae81ff">images</span><span style="color: #f8f8f2">:</span>
      <span style="color: #ae81ff">build</span><span style="color: #f8f8f2">:</span>
          <span style="color: #ae81ff">services</span><span style="color: #f8f8f2">:</span>
              <span style="color: #ae81ff">web</span><span style="color: #f8f8f2">:</span>
                  <span style="color: #ae81ff">image</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">${IMAGE_NAME}</span>
                  <span style="color: #ae81ff">naming_strategy</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">sha1</span>
  <span style="color: #ae81ff">deployment</span><span style="color: #f8f8f2">:</span>
      <span style="color: #ae81ff">deploy</span><span style="color: #f8f8f2">:</span>
          <span style="color: #ae81ff">cluster</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">${CLUSTER}</span>
          <span style="color: #ae81ff">environment</span><span style="color: #f8f8f2">:</span>
              <span style="color: #ae81ff">name</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;&quot;sfdemo-&quot;</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">~</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">code_reference.branch&#39;</span>
          <span style="color: #ae81ff">services</span><span style="color: #f8f8f2">:</span>
              <span style="color: #ae81ff">web</span><span style="color: #f8f8f2">:</span>
                  <span style="color: #ae81ff">specification</span><span style="color: #f8f8f2">:</span>
                      <span style="color: #ae81ff">accessibility</span><span style="color: #f8f8f2">:</span>
                          <span style="color: #ae81ff">from_external</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">true</span>
</pre></div>
</blockquote>

<p>This configures two tasks for ContinuousPipe to run when a tide is triggered by code being pushed to the GitHub repository.</p>

<p>The first task, called <code>images</code>, builds a Docker image for the web service based on the matching configuration for the web service in the <code>docker-compose.yml</code> file. The built image will include the repository contents in the commit that triggered the build (because of the instructions in the Dockerfile in the previous step). Once the image is built ContinuousPipe will push it to an image registry configured using the <code>IMAGE_NAME</code> variable (setting this variable is explained later).</p>

<p>The second task, called <code>deployment</code>, deploys the service to a cluster set with the <code>CLUSTER</code> variable (setting this variable is explained later). The environment name used to refer to the deployment is made consistent by combining &ldquo;sfdemo-&rdquo; with the name of the branch that triggered the process. Then the web service is deployed - it needs to be accessible directly from a browser so <code>from_external</code> has been set to &ldquo;true&rdquo;.</p>

<p>The ContinousPipe documentation has more information about <a href="../../configuration/tasks/">tasks</a>.</p>

<h3 id="configuring-the-continuouspipe-console">Configuring the ContinuousPipe Console</h3>

<p>Before we can push any code to our repository, we need to ensure that the ContinuousPipe console is properly configured. Please refer to the ContinuousPipe Quick Start guide to setup your <a href="../../quick-start/creating-a-project/">project</a>, <a href="../../quick-start/configuring-a-cluster/">cluster</a>, <a href="../../quick-start/configuring-a-registry/">registry</a> and create your first <a href="../../quick-start/creating-a-flow/">flow</a>.</p>

<h3 id="adding-variables-to-the-continuouspipe-console">Adding Variables to the ContinuousPipe Console</h3>

<p>When creating the <code>continuous-pipe.yml</code> above an <code>IMAGE_NAME</code> and <code>CLUSTER</code> variable were used. These can now be added in the configuration section of the new flow within the ContinuousPipe console. This is explained in <a href="../../quick-start/configuring-a-flow/">configuring a flow</a>.</p>

<p>The <code>CLUSTER</code> value you need can be found in the &ldquo;Clusters&rdquo; tab of the project. If you manually entered the Kubernetes cluster details you will have set the value yourself. If you used a Google linked account the value will have been set when setting up the Google Container Engine.</p>

<p>The <code>IMAGE_NAME</code> value is the path where the Docker image should be pushed to. This needs to be the full name, including the Docker repo and account e.g. <code>docker.io/continuouspipe/demo-symfony</code>. If you don&rsquo;t yet have a Docker repo nor do you know how to create one, please refer to the <a href="https://docs.docker.com/docker-hub/repos/">Docker Hub repositories documentation</a>.</p>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The variables can also have their values provided in the <code>continuous-pipe.yml</code> file as is done below for the symfony environment. Keeping them out of the file and in the ContinuousPipe console allows you to keep them out of your code repository.</p>
</div>

<h3 id="initiating-a-tide">Initiating a Tide</h3>

<p>Commit any changes if not already done and push them to your code repository. You should be able to see that a tide was triggered on the overview or tides pages for the flow on <a href="https://ui.continuouspipe.io">https://ui.continuouspipe.io</a>.</p>

<p><img src="../../images/guides/symfony/cp-tide-running.png" alt="" /></p>

<p>Clicking on the status will show more details of the build progressing. Some steps, particularly building the image and pushing it to the registry, may take a while to complete. Once it has completed running successfully you can view the environment and from there open the web service and see the running application:</p>

<p><img src="../../images/guides/symfony/cp-tide-environment.png" alt="" /></p>

<p>The default Symfony installation page should be served up (you may need to accept using the self-signed SSL cert):</p>

<p><img src="../../images/guides/symfony/endpoint-view.png" alt="" /></p>

<h2 id="remote-development-with-continuouspipe">Remote Development with ContinuousPipe</h2>

<h3 id="install-the-client">Install the Client</h3>

<p>To use ContinuousPipe as a remote development environment you will need the <code>cp-remote</code> client, which is available on OSX, Linux and Windows. Please refer to the <a href="../../remote-development/getting-started/#installation">remote development installation instructions</a> for each of the platforms.</p>

<h3 id="run-setup">Run Setup</h3>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span> cp-remote setup
</pre></div>

<p>You will now be asked a series of questions that relate to how you have configured ContinuousPipe and your cluster details. Please refer to the <a href="../../remote-development/command-setup/">remote development setup instructions</a> for more information.</p>

<h3 id="build-the-remote-environment">Build the Remote Environment</h3>

<p>To create the remote development environment run:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>cp-remote build
</pre></div>

<p>This will force push the current commit you have checked out as the remote environment branch. So assuming you are still on the master branch and at the commit that successfully created an environment, this will be used to create your initial remote environment. You can rerun the <code>cp-remote build</code> command to rebuild the remote environment with whatever you have checked out at that point as needed. However, you should not need to do this frequently if you use <code>cp-remote watch</code> to sync changes to your remote environment as you make them (explained below).</p>

<h3 id="symfony-modes">Symfony Modes</h3>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ContinuousPipe environments are different from <a href="https://symfony.com/doc/current/configuration/environments.html">Symfony environments</a>. The former refers to a  ContinuousPipe deployment target associated with a cluster and a branch, whereas the latter refer to a Symfony application state. To avoid confusion Symfony &ldquo;environments&rdquo; are referred to here as &ldquo;modes&rdquo;.</p>
</div>

<p>Currently, the application is using the Symfony production mode, which is not suitable for development purposes. To enable Symfony development mode for the ContinuousPipe remote environment you can use ContinuousPipe pipelines. Edit the <code>continuous-pipe.yml</code> file to be as follows:</p>

<blockquote>
<p><strong>continuous-pipe.yml</strong></p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #ae81ff">variables</span><span style="color: #f8f8f2">:</span>
    <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">name</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">SYMFONY_ENV</span>
      <span style="color: #ae81ff">value</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">prod</span>
 
<span style="color: #ae81ff">tasks</span><span style="color: #f8f8f2">:</span>
    <span style="color: #ae81ff">images</span><span style="color: #f8f8f2">:</span>
        <span style="color: #ae81ff">build</span><span style="color: #f8f8f2">:</span>
            <span style="color: #ae81ff">services</span><span style="color: #f8f8f2">:</span>
                <span style="color: #ae81ff">web</span><span style="color: #f8f8f2">:</span>
                    <span style="color: #ae81ff">image</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">${IMAGE_NAME}</span>
                    <span style="color: #ae81ff">naming_strategy</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">sha1</span>
    <span style="color: #ae81ff">deployment</span><span style="color: #f8f8f2">:</span>
        <span style="color: #ae81ff">deploy</span><span style="color: #f8f8f2">:</span>
            <span style="color: #ae81ff">cluster</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">${CLUSTER}</span>
            <span style="color: #ae81ff">environment</span><span style="color: #f8f8f2">:</span>
                <span style="color: #ae81ff">name</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;&quot;sfdemo-&quot;</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">~</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">code_reference.branch&#39;</span>
            <span style="color: #ae81ff">services</span><span style="color: #f8f8f2">:</span>
                <span style="color: #ae81ff">web</span><span style="color: #f8f8f2">:</span>
                    <span style="color: #ae81ff">specification</span><span style="color: #f8f8f2">:</span>
                        <span style="color: #ae81ff">accessibility</span><span style="color: #f8f8f2">:</span>
                            <span style="color: #ae81ff">from_external</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">true</span>
                        <span style="color: #ae81ff">environment_variables</span><span style="color: #f8f8f2">:</span>
                            <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">name</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">SYMFONY_ENV</span>
                              <span style="color: #ae81ff">value</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">${SYMFONY_ENV}</span>

<span style="color: #ae81ff">pipelines</span><span style="color: #f8f8f2">:</span>
    <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">name</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">Production</span>
      <span style="color: #ae81ff">condition</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;code_reference.branch</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">in</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">[&quot;master&quot;]&#39;</span>
      <span style="color: #ae81ff">tasks</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">[</span> <span style="color: #f8f8f2">images,</span> <span style="color: #f8f8f2">deployment</span> <span style="color: #f8f8f2">]</span>
    <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">name</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">Remote</span>
      <span style="color: #ae81ff">condition</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;code_reference.branch</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">matches</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;/^cpdev/&quot;&#39;</span>
      <span style="color: #ae81ff">tasks</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">[</span> <span style="color: #f8f8f2">images,</span> <span style="color: #f8f8f2">deployment</span> <span style="color: #f8f8f2">]</span>
      <span style="color: #ae81ff">variables</span><span style="color: #f8f8f2">:</span>
          <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">name</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">SYMFONY_ENV</span>
            <span style="color: #ae81ff">value</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">dev</span>
</pre></div>
</blockquote>

<p>This adds two different pipelines which use conditions to determine which pipeline is used. In this case it checks if the branch starts with &ldquo;cpdev&rdquo; - if it does then the Remote pipeline is used. If the branch is &ldquo;master&rdquo; then the Production pipeline is used. If the branch does not match either of those conditions, the tide will fail. You could use this to run different tasks but here the same tasks are run but variables have different values set.</p>

<p>The YAML variable being used is named <code>SYMFONY_ENV</code> which is declared and initialised to &ldquo;prod&rdquo; at the top of the file. It stays as &ldquo;prod&rdquo; for the Production pipeline but is set to &ldquo;dev&rdquo; for remote environments.</p>

<p>The <code>SYMFONY_ENV</code> YAML variable only has scope in ContinuousPipe whilst running the tasks - it is actually the <code>environment_variables</code> section for the service that is used to set <code>SYMFONY_ENV</code> as an environment variable on the service.</p>

<h3 id="front-controller-changes">Front Controller Changes</h3>

<p>Symfony uses the <code>SYMFONY_ENV</code> environment variable to set the environment when running console commands but does not use it in the front controller, so you will need to make some changes to that file.</p>

<p>Edit the <code>web/app.php</code> file in the repository to be as follows:</p>

<blockquote>
<p><strong>web/app.php</strong></p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f92672">&lt;?</span><span style="color: #a6e22e">php</span>
 
<span style="color: #66d9ef">use</span> <span style="color: #a6e22e">Symfony\Component\HttpFoundation\Request</span><span style="color: #f8f8f2">;</span>
<span style="color: #66d9ef">use</span> <span style="color: #a6e22e">Symfony\Component\Debug\Debug</span><span style="color: #f8f8f2">;</span>
 
<span style="color: #f8f8f2">$environment</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">getenv(</span><span style="color: #e6db74">&#39;SYMFONY_ENV&#39;</span><span style="color: #f8f8f2">);</span>
<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">($environment</span> <span style="color: #f92672">===</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">$environment</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;prod&#39;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
 
<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(($useDebugging</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">getenv(</span><span style="color: #e6db74">&#39;SYMFONY_DEBUG&#39;</span><span style="color: #f8f8f2">))</span> <span style="color: #f92672">===</span> <span style="color: #66d9ef">false</span> <span style="color: #f92672">||</span> <span style="color: #f8f8f2">$useDebugging</span> <span style="color: #f92672">===</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">$useDebugging</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">$environment</span> <span style="color: #f92672">===</span> <span style="color: #e6db74">&#39;dev&#39;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
 
<span style="color: #e6db74">/** @var \Composer\Autoload\ClassLoader $loader */</span>
<span style="color: #f8f8f2">$loader</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">require</span> <span style="color: #66d9ef">__DIR__</span><span style="color: #f92672">.</span><span style="color: #e6db74">&#39;/../app/autoload.php&#39;</span><span style="color: #f8f8f2">;</span>
 
<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #f8f8f2">$useDebugging)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">include_once</span> <span style="color: #66d9ef">__DIR__</span> <span style="color: #f92672">.</span> <span style="color: #e6db74">&#39;/../var/bootstrap.php.cache&#39;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
 
<span style="color: #66d9ef">require_once</span> <span style="color: #66d9ef">__DIR__</span> <span style="color: #f92672">.</span> <span style="color: #e6db74">&#39;/../app/AppKernel.php&#39;</span><span style="color: #f8f8f2">;</span>
 
<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">($useDebugging)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #a6e22e">Debug</span><span style="color: #f92672">::</span><span style="color: #a6e22e">enable</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">}</span>
 
<span style="color: #f8f8f2">$kernel</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">AppKernel</span><span style="color: #f8f8f2">($environment,</span> <span style="color: #f8f8f2">$useDebugging);</span>
 
<span style="color: #75715e">// we don&#39;t want to use the classes cache if we are in a debug session</span>
<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #f8f8f2">$useDebugging)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">$kernel</span><span style="color: #f92672">-&gt;</span><span style="color: #a6e22e">loadClassCache</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">}</span>
 
 
<span style="color: #75715e">// When using the HttpCache, you need to call the method in your front controller instead of relying on the configuration parameter</span>
<span style="color: #75715e">//Request::enableHttpMethodParameterOverride();</span>
<span style="color: #f8f8f2">$request</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Request</span><span style="color: #f92672">::</span><span style="color: #a6e22e">createFromGlobals</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">$response</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">$kernel</span><span style="color: #f92672">-&gt;</span><span style="color: #a6e22e">handle</span><span style="color: #f8f8f2">($request);</span>
<span style="color: #f8f8f2">$response</span><span style="color: #f92672">-&gt;</span><span style="color: #a6e22e">send</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">$kernel</span><span style="color: #f92672">-&gt;</span><span style="color: #a6e22e">terminate</span><span style="color: #f8f8f2">($request,</span> <span style="color: #f8f8f2">$response);</span>
</pre></div>
</blockquote>

<p>These changes will mean that the <code>SYMFONY_ENV</code> environment variable will be used to decide which Symfony application mode is used. You can also use a <code>SYMFONY_DEBUG</code> environment variable to turn debug more on and off, if not set then it will be on for development mode and off for production mode.</p>

<h3 id="rebuild-the-remote-environment">Rebuild the Remote Environment</h3>

<p>To rebuild the remote environment with these changes, commit them to master and run <code>cp-remote build</code> - this will establish the Production pipeline. You can now switch to a branch prefixed with &ldquo;cpdev&rdquo; and run <code>cp-remote build</code> again to establish the Remote pipeline. You will then see the two new pipelines on the overview page in the ContinuousPipe console.</p>

<p><img src="../../images/guides/symfony/cp-pipelines.png" alt="" /></p>

<p>If you now load the Remote pipeline endpoint in the browser you should see the Symfony toolbar at the bottom of the page indicating that it is in development mode.</p>

<p><img src="../../images/guides/symfony/endpoint-view-toolbar.png" alt="" /></p>

<h3 id="start-development">Start Development</h3>

<p>To start development run:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>cp-remote watch
</pre></div>

<p>You can now make changes and they will be synced to the remote environment where you should be able to see the result.</p>



        </div>
    </article>

    <footer class="footer" style="margin-top: 20px;">
        





<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="../../guides/laravel/" title="Getting Started with Laravel">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Getting Started with Laravel
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="../../guides/drupal/" title="Getting Started with Drupal">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Getting Started with Drupal
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





    </footer>

    <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
            <div class="wrapper">
                <div class="meta"></div>
                <div class="list"></div>
            </div>
        </div>
    </div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="../../javascripts/application.js"></script>
    
    <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
    
    <script src="../../javascripts/jquery-3.1.1.min.js"></script>
    
    <script src="../../javascripts/menu.js"></script>
    

    <script>
    /* Removes redundant event listener from material theme */
    window.addEventListener('load', function () {
        var searchToggle = document.querySelector("#toggle-search");
        var searchLabel = document.querySelector("[for=\"toggle-search\"]");
        var algoliaInput = document.querySelector("#algolia-query");

        function elementReset(elem) {
            elem.parentNode.replaceChild(elem.cloneNode(true), elem);
        }

        elementReset(searchToggle);
        searchLabel.addEventListener('click', function() {
            algoliaInput.focus();
        }, false);
    }, false);
    </script>

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>
    <script type="text/javascript"> 
    docsearch({
        apiKey: '608036855612fb9a0dd2e9a2c09955bc',
        indexName: 'continuouspipe',
        inputSelector: '#algolia-query',
        debug: true 
    });
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-71216332-1', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>

